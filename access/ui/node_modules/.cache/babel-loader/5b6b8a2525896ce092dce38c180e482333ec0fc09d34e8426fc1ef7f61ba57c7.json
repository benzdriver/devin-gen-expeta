{"ast":null,"code":"import React,{useState}from'react';import{useNavigate,useLocation}from'react-router-dom';import{Box,Flex,Stack,Heading,Text,FormControl,FormLabel,Input,Button,Checkbox,Link,InputGroup,InputRightElement,IconButton,Alert,AlertIcon,useColorModeValue}from'@chakra-ui/react';import{ViewIcon,ViewOffIcon}from'@chakra-ui/icons';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{var _location$state,_location$state$from;const{login,error,setCurrentUser}=useAuth();const navigate=useNavigate();const location=useLocation();const[credentials,setCredentials]=useState({email:'',password:''});const[showPassword,setShowPassword]=useState(false);const[submitting,setSubmitting]=useState(false);const[loginError,setLoginError]=useState('');// 获取重定向目标\nconst from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||\"/\";// 处理表单输入变化\nconst handleChange=e=>{const{name,value}=e.target;setCredentials(prev=>({...prev,[name]:value}));};// 切换密码可见性\nconst handleTogglePassword=()=>{setShowPassword(!showPassword);};// 提交登录\nconst handleSubmit=async e=>{e.preventDefault();setSubmitting(true);setLoginError('');// 验证表单数据\nif(!credentials.email||!credentials.password){setLoginError('Please enter both email and password');setSubmitting(false);return;}try{// 尝试使用真实登录请求\ntry{const user=await login(credentials);navigate(from,{replace:true});return;}catch(error){console.log('真实登录失败，使用模拟登录');}// 开发模式：模拟成功登录\nsetTimeout(()=>{// 模拟用户数据\nconst mockUser={id:'user_123',name:'测试用户',email:credentials.email};// 存储认证信息\nlocalStorage.setItem('authToken','demo-token');localStorage.setItem('mockUser',JSON.stringify(mockUser));// 更新Auth上下文\nsetCurrentUser&&setCurrentUser(mockUser);// 导航到之前的页面或首页\nnavigate(from,{replace:true});},1000);}catch(err){setLoginError(err.message||'登录失败，请检查您的账号和密码');}finally{setSubmitting(false);}};return/*#__PURE__*/_jsx(Flex,{minH:'100vh',align:'center',justify:'center',bg:useColorModeValue('gray.50','gray.800'),children:/*#__PURE__*/_jsxs(Stack,{spacing:8,mx:'auto',maxW:'lg',py:12,px:6,width:\"100%\",children:[/*#__PURE__*/_jsxs(Stack,{align:'center',children:[/*#__PURE__*/_jsx(Heading,{fontSize:'4xl',color:\"blue.600\",children:\"Expeta 2.0\"}),/*#__PURE__*/_jsx(Text,{fontSize:'lg',color:'gray.600',children:\"Semantic-Driven Software Development\"})]}),/*#__PURE__*/_jsx(Box,{rounded:'lg',bg:useColorModeValue('white','gray.700'),boxShadow:'lg',p:8,children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Stack,{spacing:4,children:[(loginError||error)&&/*#__PURE__*/_jsxs(Alert,{status:\"error\",borderRadius:\"md\",children:[/*#__PURE__*/_jsx(AlertIcon,{}),loginError||error]}),/*#__PURE__*/_jsxs(FormControl,{id:\"email\",isRequired:true,children:[/*#__PURE__*/_jsx(FormLabel,{children:\"Email\"}),/*#__PURE__*/_jsx(Input,{type:\"email\",name:\"email\",value:credentials.email,onChange:handleChange})]}),/*#__PURE__*/_jsxs(FormControl,{id:\"password\",isRequired:true,children:[/*#__PURE__*/_jsx(FormLabel,{children:\"Password\"}),/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(Input,{type:showPassword?'text':'password',name:\"password\",value:credentials.password,onChange:handleChange}),/*#__PURE__*/_jsx(InputRightElement,{h:'full',children:/*#__PURE__*/_jsx(IconButton,{variant:'ghost',onClick:handleTogglePassword,icon:showPassword?/*#__PURE__*/_jsx(ViewIcon,{}):/*#__PURE__*/_jsx(ViewOffIcon,{}),\"aria-label\":showPassword?'Hide password':'Show password'})})]})]}),/*#__PURE__*/_jsxs(Stack,{spacing:10,children:[/*#__PURE__*/_jsxs(Stack,{direction:{base:'column',sm:'row'},align:'start',justify:'space-between',children:[/*#__PURE__*/_jsx(Checkbox,{children:\"Remember me\"}),/*#__PURE__*/_jsx(Link,{color:'blue.400',children:\"Forgot password?\"})]}),/*#__PURE__*/_jsx(Button,{colorScheme:'blue',loadingText:\"Signing in\",isLoading:submitting,type:\"submit\",children:\"Sign in\"})]})]})})}),/*#__PURE__*/_jsxs(Text,{mt:4,textAlign:\"center\",children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(Link,{color:'blue.400',onClick:()=>navigate('/register'),children:\"Register here\"})]})]})});};export default LoginPage;","map":{"version":3,"names":["React","useState","useNavigate","useLocation","Box","Flex","Stack","Heading","Text","FormControl","FormLabel","Input","Button","Checkbox","Link","InputGroup","InputRightElement","IconButton","Alert","AlertIcon","useColorModeValue","ViewIcon","ViewOffIcon","useAuth","jsx","_jsx","jsxs","_jsxs","LoginPage","_location$state","_location$state$from","login","error","setCurrentUser","navigate","location","credentials","setCredentials","email","password","showPassword","setShowPassword","submitting","setSubmitting","loginError","setLoginError","from","state","pathname","handleChange","e","name","value","target","prev","handleTogglePassword","handleSubmit","preventDefault","user","replace","console","log","setTimeout","mockUser","id","localStorage","setItem","JSON","stringify","err","message","minH","align","justify","bg","children","spacing","mx","maxW","py","px","width","fontSize","color","rounded","boxShadow","p","onSubmit","status","borderRadius","isRequired","type","onChange","h","variant","onClick","icon","direction","base","sm","colorScheme","loadingText","isLoading","mt","textAlign"],"sources":["/Users/ziyanzhou/Projects/devin-gen-expeta/access/ui/src/pages/LoginPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport {\n  Box,\n  Flex,\n  Stack,\n  Heading,\n  Text,\n  FormControl,\n  FormLabel,\n  Input,\n  Button,\n  Checkbox,\n  Link,\n  InputGroup,\n  InputRightElement,\n  IconButton,\n  Alert,\n  AlertIcon,\n  useColorModeValue,\n} from '@chakra-ui/react';\nimport { ViewIcon, ViewOffIcon } from '@chakra-ui/icons';\n\nimport { useAuth } from '../context/AuthContext';\n\nconst LoginPage = () => {\n  const { login, error, setCurrentUser } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n  \n  const [credentials, setCredentials] = useState({\n    email: '',\n    password: '',\n  });\n  \n  const [showPassword, setShowPassword] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [loginError, setLoginError] = useState('');\n  \n  // 获取重定向目标\n  const from = location.state?.from?.pathname || \"/\";\n  \n  // 处理表单输入变化\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setCredentials(prev => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n  \n  // 切换密码可见性\n  const handleTogglePassword = () => {\n    setShowPassword(!showPassword);\n  };\n  \n  // 提交登录\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setSubmitting(true);\n    setLoginError('');\n    \n    // 验证表单数据\n    if (!credentials.email || !credentials.password) {\n      setLoginError('Please enter both email and password');\n      setSubmitting(false);\n      return;\n    }\n    \n    try {\n      // 尝试使用真实登录请求\n      try {\n        const user = await login(credentials);\n        navigate(from, { replace: true });\n        return;\n      } catch (error) {\n        console.log('真实登录失败，使用模拟登录');\n      }\n      \n      // 开发模式：模拟成功登录\n      setTimeout(() => {\n        // 模拟用户数据\n        const mockUser = {\n          id: 'user_123',\n          name: '测试用户',\n          email: credentials.email\n        };\n        \n        // 存储认证信息\n        localStorage.setItem('authToken', 'demo-token');\n        localStorage.setItem('mockUser', JSON.stringify(mockUser));\n        \n        // 更新Auth上下文\n        setCurrentUser && setCurrentUser(mockUser);\n        \n        // 导航到之前的页面或首页\n        navigate(from, { replace: true });\n      }, 1000);\n    } catch (err) {\n      setLoginError(err.message || '登录失败，请检查您的账号和密码');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <Flex\n      minH={'100vh'}\n      align={'center'}\n      justify={'center'}\n      bg={useColorModeValue('gray.50', 'gray.800')}\n    >\n      <Stack spacing={8} mx={'auto'} maxW={'lg'} py={12} px={6} width=\"100%\">\n        <Stack align={'center'}>\n          <Heading fontSize={'4xl'} color=\"blue.600\">Expeta 2.0</Heading>\n          <Text fontSize={'lg'} color={'gray.600'}>\n            Semantic-Driven Software Development\n          </Text>\n        </Stack>\n        \n        <Box\n          rounded={'lg'}\n          bg={useColorModeValue('white', 'gray.700')}\n          boxShadow={'lg'}\n          p={8}\n        >\n          <form onSubmit={handleSubmit}>\n            <Stack spacing={4}>\n              {(loginError || error) && (\n                <Alert status=\"error\" borderRadius=\"md\">\n                  <AlertIcon />\n                  {loginError || error}\n                </Alert>\n              )}\n              \n              <FormControl id=\"email\" isRequired>\n                <FormLabel>Email</FormLabel>\n                <Input\n                  type=\"email\"\n                  name=\"email\"\n                  value={credentials.email}\n                  onChange={handleChange}\n                />\n              </FormControl>\n              \n              <FormControl id=\"password\" isRequired>\n                <FormLabel>Password</FormLabel>\n                <InputGroup>\n                  <Input\n                    type={showPassword ? 'text' : 'password'}\n                    name=\"password\"\n                    value={credentials.password}\n                    onChange={handleChange}\n                  />\n                  <InputRightElement h={'full'}>\n                    <IconButton\n                      variant={'ghost'}\n                      onClick={handleTogglePassword}\n                      icon={showPassword ? <ViewIcon /> : <ViewOffIcon />}\n                      aria-label={showPassword ? 'Hide password' : 'Show password'}\n                    />\n                  </InputRightElement>\n                </InputGroup>\n              </FormControl>\n              \n              <Stack spacing={10}>\n                <Stack\n                  direction={{ base: 'column', sm: 'row' }}\n                  align={'start'}\n                  justify={'space-between'}\n                >\n                  <Checkbox>Remember me</Checkbox>\n                  <Link color={'blue.400'}>Forgot password?</Link>\n                </Stack>\n                \n                <Button\n                  colorScheme={'blue'}\n                  loadingText=\"Signing in\"\n                  isLoading={submitting}\n                  type=\"submit\"\n                >\n                  Sign in\n                </Button>\n              </Stack>\n            </Stack>\n          </form>\n        </Box>\n        \n        <Text mt={4} textAlign=\"center\">\n          Don't have an account?{' '}\n          <Link color={'blue.400'} onClick={() => navigate('/register')}>\n            Register here\n          </Link>\n        </Text>\n      </Stack>\n    </Flex>\n  );\n};\n\nexport default LoginPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}